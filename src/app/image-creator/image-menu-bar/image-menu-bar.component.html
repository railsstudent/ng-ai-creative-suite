<div class="flex flex-col gap-4">
  <!-- Top row: Prompt and Generate Button -->
  <app-prompt-form
    [(prompt)]="prompt"
    (generate)="generateImage.emit()"
    placeholderText="e.g., A synthwave sunset over a futuristic city."
  >
    <span button-text>Generate Image</span>
    <span loading-text>Generating...</span>
  </app-prompt-form>

  <!-- Bottom row: Settings -->
  <div class="grid grid-cols-1 sm:grid-cols-4 gap-4">
    <div>
      <label for="image-count" class="block text-sm font-medium text-gray-300 mb-1">Number of images</label>
      <select id="image-count" [(ngModel)]="numberOfImages" class="w-full bg-gray-700 text-gray-200 border border-gray-600 rounded-md py-2 px-3 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition duration-200">
        @for (count of imageCountOptions; track count) {
          <option [ngValue]="count">{{ count }}</option>
        }
      </select>
    </div>
    <div>
      <label for="aspect-ratio" class="block text-sm font-medium text-gray-300 mb-1">Aspect Ratio</label>
      <select id="aspect-ratio" [(ngModel)]="aspectRatio" class="w-full bg-gray-700 text-gray-200 border border-gray-600 rounded-md py-2 px-3 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition duration-200">
        @for (ratio of aspectRatioOptions; track ratio) {
          <option [ngValue]="ratio">{{ ratio }}</option>
        }
      </select>
    </div>
    <div>
      <label class="block text-sm font-medium text-gray-300 mb-1">Video Generation</label>
      <div class="flex items-center gap-4 h-full">
        <label for="video-toggle" class="relative inline-flex items-center cursor-pointer">
            <input type="checkbox" id="video-toggle" class="sr-only peer" [(ngModel)]="enableVideoGeneration">
            <div class="w-11 h-6 bg-gray-600 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-indigo-800 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-indigo-600"></div>
        </label>
      </div>
    </div>
    <div>
      @if (enableVideoGeneration()) {
          <button
            (click)="generateVideo.emit()"
            [disabled]="isGenerateVideoDisabled()"
            class="h-full inline-flex items-center justify-center px-4 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-800 focus:ring-indigo-500 disabled:bg-indigo-400 disabled:cursor-not-allowed transition duration-200">
            @if (isGeneratingVideo()) {
              <app-spinner-icon />
              <span>Generating...</span>
            } @else {
              <span>Generate Video</span>
            }
          </button>
        }
    </div>
  </div>
</div>
